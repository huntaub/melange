<div ng-include="'partials/settings/toolbar.html'"></div>

<div class="container-fluid settings">
  <h3><i class="fa fa-gears"></i> Settings <small>Apps</small></h3>
  <hr/>
  <h4>Install Applications</h4>
  <div class="row">
    <div class="col-xs-6">
      <form class="form">
        <div class="form-group">
          <label for="application-search">Search for Applications</label>
          <input id="application-search" name="application-search" type="text" class="form-control" placeholder="flappy bird application">
        </div>
      </form>
    </div>
    <div class="col-xs-6">
      <form class="form">
        <div class="form-group">
          <label for="application-url">Install a Custom Application via URL</label>
          <input id="application-url" name="application-url" type="text" class="form-control" placeholder="http://airdispat.ch/plugins/notes.zip">
        </div>
      </form>
    </div>
  </div>
  <hr/>
  <h4><i class="fa fa-history"></i> Application Updates</h4>
  <div ng-if="loadingUpdates" class="text-muted text-center">
    <i class="fa fa-spin fa-circle-o-notch fa-4x"></i>
  </div>
  <div ng-if="updates.length == 0 && !loadingUpdates" class="text-muted text-center">
    <p>All applications are up to date.</p>
  </div>
  <div ng-if="updates.length > 0 && !loadingUpdates" class="row">
    <div class="col-sm-6" ng-repeat="plugin in updates">
      <div class="panel panel-default">
        <div class="panel-body">
          <p class="lead" style="margin-bottom: 0;">
            {{ plugin.Id }} to {{ plugin.Version }}
          </p>
          <p>{{ plugin.Changelog }}</p>
          <p class="small">at {{ plugin.Repository }}</p>
        </div>
        <div class="panel-footer">
          <a href="" ng-click="update(plugin)" ng-disabled="plugin.Updated || plugin.Updating" class="btn btn-xs" ng-class="{'btn-primary': !plugin.Updating, 'btn-default': plugin.Updating}">
              <span ng-if="plugin.Updating">
                <i class="fa fa-fw fa-spin fa-circle-o-notch"></i>
              </span>
            {{ plugin.Installed ? 'Updated' : 'Update' }}
          </a>
        </div>
      </div>
    </div>
  </div>
  <hr/>
  <h4><i class="fa fa-star"></i> Featured Applications</h4>
  <div ng-if="loadingStore" class="text-muted text-center">
    <i class="fa fa-spin fa-circle-o-notch fa-4x"></i>
  </div>
  <div class="row">
    <div class="col-sm-6" ng-repeat="plugin in store">
      <div class="panel panel-default">
        <div class="panel-body">
          <p class="lead" style="margin-bottom: 0;">
            {{ plugin.Name }}
          </p>
          <p>{{ plugin.Description }}</p>
          <p class="small">by {{ plugin.Username }}</p>
        </div>
        <div class="panel-footer">
          <a href="" ng-click="install(plugin)" ng-disabled="plugin.Installed || plugin.Installing" class="btn btn-xs" ng-class="{'btn-primary': !plugin.Installed, 'btn-default': plugin.Installed}">
              <span ng-if="plugin.Installing">
                <i class="fa fa-fw fa-spin fa-circle-o-notch"></i>
              </span>
            {{ plugin.Installed ? 'Installed' : 'Install' }}
          </a>
        </div>
      </div>
    </div>
  </div>
  <hr/>
  <h4><i class="fa fa-desktop"></i> Installed Applications</h4>
  <div ng-if="!hasPlugins" class="text-muted text-center">
    <p>No plugins installed yet, go ahead and install some.</p>
  </div>
  <ul class="list-group">
    <li class="list-group-item" ng-repeat="plugin in plugins">
      <p class="pull-right">
        <a href="" ng-click="uninstall(plugin)" class="btn btn-xs btn-danger">Uninstall</a>
      </p>
      <h4><abbr title="{{ plugin.id }}">{{ plugin.name }}</abbr> <small>by {{ plugin.author.name }}</small></h4>
      <p>{{ plugin.description }}</p>
    </li>
  </ul>
</div>
